<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aventura no Labirinto do Conhecimento</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #2c3e50);
            color: #ecf0f1;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 900px;
            width: 100%;
            text-align: center;
        }
        
        header {
            margin-bottom: 20px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.8em;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.7);
            margin-bottom: 10px;
            background: linear-gradient(45deg, #3498db, #e74c3c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: titleGlow 3s infinite alternate;
        }
        
        @keyframes titleGlow {
            0% { text-shadow: 0 0 10px rgba(52, 152, 219, 0.7); }
            100% { text-shadow: 0 0 20px rgba(231, 76, 60, 0.7), 0 0 30px rgba(231, 76, 60, 0.5); }
        }
        
        .subtitle {
            font-size: 1.2em;
            margin-bottom: 20px;
            color: #bdc3c7;
        }
        
        .game-container {
            position: relative;
            margin: 0 auto;
            width: 800px;
            height: 600px;
            border: 4px solid #34495e;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            background: #2c3e50;
        }
        
        canvas {
            display: block;
            background: #34495e;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 25px;
            background: linear-gradient(to bottom, #3498db, #2980b9);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.4);
            background: linear-gradient(to bottom, #2980b9, #3498db);
        }
        
        .btn:active {
            transform: translateY(1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            width: 100%;
            max-width: 800px;
            margin: 20px 0;
            padding: 15px;
            background: rgba(44, 62, 80, 0.7);
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            color: #3498db;
        }
        
        .instructions {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background: rgba(44, 62, 80, 0.7);
            border-radius: 10px;
            text-align: left;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .instructions h2 {
            color: #3498db;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .instructions ul {
            list-style-type: none;
            padding: 0 15px;
        }
        
        .instructions li {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }
        
        .instructions li:before {
            content: "•";
            color: #e74c3c;
            font-weight: bold;
            position: absolute;
            left: 0;
        }
        
        footer {
            margin-top: 30px;
            color: #7f8c8d;
            text-align: center;
            font-size: 0.9em;
        }
        
        /* Responsividade */
        @media (max-width: 850px) {
            .game-container {
                width: 100%;
                height: 500px;
            }
            
            canvas {
                width: 100%;
                height: 500px;
            }
            
            h1 {
                font-size: 2.2em;
            }
        }
        
        @media (max-width: 600px) {
            .game-container {
                height: 400px;
            }
            
            canvas {
                height: 400px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 80%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Aventura no Labirinto do Conhecimento</h1>
            <p class="subtitle">Encontre a saída e colete todos os livros do conhecimento!</p>
        </header>
        
        <div class="stats">
            <div class="stat-item">
                <div class="stat-label">Livros Coletados</div>
                <div class="stat-value" id="booksCounter">0/5</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Tempo</div>
                <div class="stat-value" id="timer">00:00</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Vidas</div>
                <div class="stat-value" id="lives">3</div>
            </div>
        </div>
        
        <div class="game-container">
            <canvas id="gameCanvas" width="800" height="600"></canvas>
        </div>
        
        <div class="controls">
            <button class="btn" id="restartBtn">Reiniciar Jogo</button>
            <button class="btn" id="pauseBtn">Pausar</button>
            <button class="btn" id="helpBtn">Como Jogar</button>
        </div>
        
        <div class="instructions" id="instructionsPanel">
            <h2>Como Jogar</h2>
            <ul>
                <li>Use as teclas <strong>W, A, S, D</strong> ou <strong>setas direcionais</strong> para mover o personagem</li>
                <li>Pressione <strong>Espaço</strong> ou <strong>seta para cima</strong> para pular</li>
                <li>Colete todos os 5 livros para habilitar a saída do labirinto</li>
                <li>Evite os obstáculos vermelhos para não perder vidas</li>
                <li>Encontre a porta de saída após coletar todos os livros</li>
                <li>Você tem 3 vidas - boa sorte!</li>
            </ul>
        </div>
        
        <footer>
            <p>Desenvolvido com ❤️ para a aventura do conhecimento | &copy; 2023</p>
        </footer>
    </div>

    <script>
        // Classes para organizar o código
        class Player {
            constructor() {
                this.x = 50;
                this.y = 50;
                this.width = 30;
                this.height = 30;
                this.color = '#e74c3c';
                this.speed = 5;
                this.jumpStrength = 12;
                this.yVelocity = 0;
                this.isJumping = false;
                this.facing = 'right';
            }

            draw(ctx) {
                // Corpo do jogador
                ctx.fillStyle = this.color;
                ctx.fillRect(this.x, this.y, this.width, this.height);
                
                // Detalhes do jogador (olhos)
                ctx.fillStyle = '#fff';
                if (this.facing === 'right') {
                    ctx.fillRect(this.x + 20, this.y + 7, 6, 6);
                } else {
                    ctx.fillRect(this.x + 4, this.y + 7, 6, 6);
                }
            }

            update(gravity, canvasHeight) {
                this.yVelocity += gravity;
                this.y += this.yVelocity;

                // Limites da tela
                if (this.y + this.height > canvasHeight) {
                    this.y = canvasHeight - this.height;
                    this.yVelocity = 0;
                    this.isJumping = false;
                }
                
                if (this.y < 0) {
                    this.y = 0;
                    this.yVelocity = 0;
                }
                
                if (this.x < 0) this.x = 0;
                if (this.x + this.width > canvas.width) this.x = canvas.width - this.width;
            }
        }

        class Platform {
            constructor(x, y, width, height, type = 'normal') {
                this.x = x;
                this.y = y;
                this.width = width;
                this.height = height;
                this.type = type;
                
                switch(type) {
                    case 'hazard':
                        this.color = '#e74c3c';
                        break;
                    case 'goal':
                        this.color = '#f1c40f';
                        break;
                    default:
                        this.color = '#2ecc71';
                }
            }

            draw(ctx) {
                ctx.fillStyle = this.color;
                ctx.fillRect(this.x, this.y, this.width, this.height);
                
                // Padrão para plataformas de perigo
                if (this.type === 'hazard') {
                    ctx.fillStyle = '#c0392b';
                    for (let i = 0; i < this.width; i += 10) {
                        ctx.fillRect(this.x + i, this.y + 5, 5, 3);
                    }
                }
                
                // Desenho especial para a meta
                if (this.type === 'goal') {
                    ctx.fillStyle = '#fff';
                    ctx.beginPath();
                    ctx.arc(this.x + this.width/2, this.y + this.height/2, 5, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.beginPath();
                    ctx.arc(this.x + this.width/2 - 10, this.y + this.height/2, 5, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.beginPath();
                    ctx.arc(this.x + this.width/2 + 10, this.y + this.height/2, 5, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
        }

        class Collectible {
            constructor(x, y, type = 'book') {
                this.x = x;
                this.y = y;
                this.width = 20;
                this.height = 20;
                this.type = type;
                this.collected = false;
                this.animationOffset = 0;
                this.animationDirection = 1;
            }

            draw(ctx) {
                if (this.collected) return;
                
                this.animationOffset += 0.05 * this.animationDirection;
                if (this.animationOffset > 5 || this.animationOffset < 0) {
                    this.animationDirection *= -1;
                }
                
                if (this.type === 'book') {
                    // Desenha um livro
                    ctx.fillStyle = '#3498db';
                    ctx.fillRect(this.x, this.y - this.animationOffset, this.width, this.height);
                    
                    ctx.fillStyle = '#2980b9';
                    ctx.fillRect(this.x + 3, this.y + 3 - this.animationOffset, this.width - 6, this.height - 6);
                    
                    ctx.fillStyle = '#fff';
                    ctx.fillText("?", this.x + 7, this.y + 15 - this.animationOffset);
                }
            }

            checkCollision(player) {
                if (this.collected) return false;
                
                return (
                    player.x < this.x + this.width &&
                    player.x + player.width > this.x &&
                    player.y < this.y + this.height &&
                    player.y + player.height > this.y
                );
            }
        }

        // Configurações do jogo
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const gravity = 0.5;
        let keys = {};
        let gameRunning = true;
        let gamePaused = false;
        let booksCollected = 0;
        let totalBooks = 5;
        let playerLives = 3;
        let gameTime = 0;
        let timerInterval;
        let goalReached = false;

        // Elementos da UI
        const booksCounter = document.getElementById('booksCounter');
        const timerElement = document.getElementById('timer');
        const livesElement = document.getElementById('lives');
        const restartBtn = document.getElementById('restartBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const helpBtn = document.getElementById('helpBtn');
        const instructionsPanel = document.getElementById('instructionsPanel');

        // Instância do jogador
        const player = new Player();

        // Plataformas e obstáculos
        const platforms = [
            // Plataformas principais
            new Platform(0, 550, 800, 50, 'normal'),
            new Platform(100, 450, 200, 20, 'normal'),
            new Platform(400, 350, 150, 20, 'normal'),
            new Platform(200, 250, 100, 20, 'normal'),
            new Platform(600, 200, 150, 20, 'normal'),
            new Platform(500, 450, 200, 20, 'normal'),
            
            // Obstáculos perigosos
            new Platform(300, 550, 50, 20, 'hazard'),
            new Platform(550, 550, 70, 20, 'hazard'),
            
            // Plataforma de objetivo (inicialmente inativa)
            new Platform(700, 100, 80, 20, 'goal')
        ];

        // Itens colecionáveis
        const collectibles = [
            new Collectible(150, 420),
            new Collectible(450, 320),
            new Collectible(230, 220),
            new Collectible(650, 170),
            new Collectible(550, 420)
        ];

        // Inicialização do jogo
        function initGame() {
            gameRunning = true;
            gamePaused = false;
            booksCollected = 0;
            playerLives = 3;
            gameTime = 0;
            goalReached = false;
            
            player.x = 50;
            player.y = 50;
            player.yVelocity = 0;
            
            // Reset coletáveis
            collectibles.forEach(item => item.collected = false);
            
            // Atualiza UI
            updateUI();
            
            // Inicia o timer
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                if (!gamePaused && gameRunning) {
                    gameTime++;
                    updateTimer();
                }
            }, 1000);
            
            // Inicia o loop do jogo
            if (!gamePaused) {
                requestAnimationFrame(gameLoop);
            }
        }

        // Loop principal do jogo
        function gameLoop() {
            if (!gameRunning || gamePaused) return;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Desenha fundo
            drawBackground();
            
            // Atualiza e desenha plataformas
            platforms.forEach(platform => platform.draw(ctx));
            
            // Atualiza e desenha coletáveis
            collectibles.forEach(item => {
                item.draw(ctx);
                if (item.checkCollision(player) && !item.collected) {
                    item.collected = true;
                    booksCollected++;
                    updateUI();
                    
                    // Ativa a plataforma de objetivo se todos os livros foram coletados
                    if (booksCollected === totalBooks) {
                        platforms[platforms.length - 1].color = '#27ae60';
                    }
                }
            });
            
            // Atualiza e desenha jogador
            handleInput();
            player.update(gravity, canvas.height);
            checkCollisions();
            player.draw(ctx);
            
            // Verifica vitória
            if (booksCollected === totalBooks) {
                checkGoal();
            }
            
            // Verifica game over
            if (playerLives <= 0) {
                gameOver();
                return;
            }
            
            requestAnimationFrame(gameLoop);
        }

        // Desenha o fundo com gradiente
        function drawBackground() {
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, "#2c3e50");
            gradient.addColorStop(1, "#1a2530");
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Estrelas de fundo
            ctx.fillStyle = "#ecf0f1";
            for (let i = 0; i < 50; i++) {
                const x = Math.random() * canvas.width;
                const y = Math.random() * canvas.height / 2;
                const size = Math.random() * 2;
                ctx.fillRect(x, y, size, size);
            }
        }

        // Lida com a entrada do teclado
        function handleInput() {
            if (keys['ArrowRight'] || keys['d']) {
                player.x += player.speed;
                player.facing = 'right';
            }
            if (keys['ArrowLeft'] || keys['a']) {
                player.x -= player.speed;
                player.facing = 'left';
            }
            if ((keys['ArrowUp'] || keys['w'] || keys[' ']) && !player.isJumping) {
                player.yVelocity = -player.jumpStrength;
                player.isJumping = true;
            }
        }

        // Verifica colisões
        function checkCollisions() {
            let onPlatform = false;
            
            platforms.forEach(platform => {
                if (
                    player.y + player.height > platform.y &&
                    player.y < platform.y + platform.height &&
                    player.x + player.width > platform.x &&
                    player.x < platform.x + platform.width
                ) {
                    // Plataforma normal
                    if (platform.type === 'normal') {
                        if (player.y + player.height - player.yVelocity <= platform.y) {
                            player.y = platform.y - player.height;
                            player.yVelocity = 0;
                            player.isJumping = false;
                            onPlatform = true;
                        }
                    }
                    // Plataforma de perigo
                    else if (platform.type === 'hazard') {
                        playerLives--;
                        updateUI();
                        resetPlayer();
                    }
                }
            });
            
            // Se não está em uma plataforma e está caindo, está pulando
            if (!onPlatform && player.yVelocity > 0) {
                player.isJumping = true;
            }
        }

        // Verifica se o jogador alcançou o objetivo
        function checkGoal() {
            const goal = platforms[platforms.length - 1];
            
            if (
                player.y + player.height > goal.y &&
                player.y < goal.y + goal.height &&
                player.x + player.width > goal.x &&
                player.x < goal.x + goal.width
            ) {
                goalReached = true;
                victory();
            }
        }

        // Reseta a posição do jogador
        function resetPlayer() {
            player.x = 50;
            player.y = 50;
            player.yVelocity = 0;
        }

        // Atualiza a interface do usuário
        function updateUI() {
            booksCounter.textContent = `${booksCollected}/${totalBooks}`;
            livesElement.textContent = playerLives;
        }

        // Atualiza o timer
        function updateTimer() {
            const minutes = Math.floor(gameTime / 60);
            const seconds = gameTime % 60;
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // Game over
        function gameOver() {
            gameRunning = false;
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = '#e74c3c';
            ctx.font = '48px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Game Over', canvas.width / 2, canvas.height / 2);
            
            ctx.fillStyle = '#ecf0f1';
            ctx.font = '24px Arial';
            ctx.fillText('Pressione "Reiniciar" para jogar novamente', canvas.width / 2, canvas.height / 2 + 50);
        }

        // Vitória
        function victory() {
            gameRunning = false;
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = '#2ecc71';
            ctx.font = '48px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Parabéns!', canvas.width / 2, canvas.height / 2 - 30);
            ctx.fillText('Você completou o labirinto!', canvas.width / 2, canvas.height / 2 + 30);
            
            ctx.fillStyle = '#ecf0f1';
            ctx.font = '20px Arial';
            ctx.fillText(`Tempo: ${Math.floor(gameTime / 60)}:${(gameTime % 60).toString().padStart(2, '0')}`, canvas.width / 2, canvas.height / 2 + 80);
            
            ctx.fillStyle = '#3498db';
            ctx.font = '24px Arial';
            ctx.fillText('Pressione "Reiniciar" para jogar novamente', canvas.width / 2, canvas.height / 2 + 130);
        }

        // Event listeners
        window.addEventListener('keydown', (e) => {
            keys[e.key] = true;
        });

        window.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        restartBtn.addEventListener('click', () => {
            initGame();
        });

        pauseBtn.addEventListener('click', () => {
            gamePaused = !gamePaused;
            pauseBtn.textContent = gamePaused ? 'Continuar' : 'Pausar';
            if (!gamePaused && gameRunning) {
                requestAnimationFrame(gameLoop);
            }
        });

        helpBtn.addEventListener('click', () => {
            instructionsPanel.style.display = instructionsPanel.style.display === 'none' ? 'block' : 'none';
        });

        // Inicia o jogo
        initGame();
    </script>
</body>
</html>